# 无人机强化学习路径规划项目（动态障碍物环境）

本项目实现了一个基于强化学习的无人机路径规划系统，专门针对存在动态障碍物的复杂环境。项目实现了多种强化学习算法，并提供了可视化界面用于环境设置和结果展示。

## 项目概述

本项目旨在解决无人机在动态障碍物环境中的路径规划问题。通过实现多种强化学习算法，包括Q-Learning、SARSA、Policy Gradient和DQN，对无人机在包含移动障碍物的网格环境中的路径规划能力进行训练和评估。

## 项目特点

- 多种强化学习算法实现：Q-Learning、SARSA、Policy Gradient、DQN
- 动态障碍物模拟：支持固定轨迹往复运动的动态障碍物
- 多种奖励函数设计：提供5种不同的奖励函数用于算法性能对比
- 可视化界面：基于Tkinter的GUI界面，支持环境设置和训练过程可视化
- 路径验证机制：确保生成的路径合法且不穿越障碍物
- 性能对比分析：支持不同算法和奖励函数的性能对比

## 文件结构

```
无人机强化学习（动态障碍物）
├── environment.py           # 环境类定义，包括静态和动态障碍物处理
├── q_learning.py           # Q-Learning算法实现
├── sarsa.py               # SARSA算法实现
├── policy_gradient.py     # Policy Gradient算法实现
├── dqn.py                 # DQN算法实现
├── reward_functions.py    # 奖励函数模块，包含5种不同的奖励函数
├── reward_comparison.py   # 奖励函数性能对比脚本
├── rl_runner.py           # 强化学习运行器模块
├── grid_gui.py            # 图形界面模块
├── main.py                # 主程序，用于算法训练和结果可视化
└── README.md              # 项目说明文档
```

## 环境要求

- Python 3.6+
- numpy
- matplotlib
- tkinter
- pytorch (用于DQN算法)

## 环境特性

### 静态障碍物
- 可在网格环境中设置任意位置和大小的静态障碍物
- 支持从配置文件加载和保存环境设置

### 动态障碍物
- 实现固定轨迹往复运动的动态障碍物
- 支持水平和垂直方向的往复运动
- 动态障碍物位置在每个训练episode开始时更新

### 网格环境
- 默认20x20的网格环境
- 起点位于(0,0)，终点位于(19,19)
- 支持自定义网格大小

## 强化学习算法

### Q-Learning
基于值函数的无模型强化学习算法，通过Q表学习状态-动作值函数。

### SARSA
与Q-Learning类似，但使用在线策略学习，更新规则有所不同。

### Policy Gradient
基于策略梯度的算法，直接优化策略函数而非值函数。

### DQN (Deep Q-Network)
使用深度神经网络近似Q值函数的深度强化学习算法。

## 奖励函数设计

项目提供了5种不同的奖励函数用于算法性能对比：

1. **v1 - 基础奖励函数**：简单的奖励机制，到达目标+100，碰撞-10，每步-1
2. **v2 - 距离敏感版本**：基于到目标点的欧几里得距离提供奖励
3. **v3 - 步数优化版本**：更强的步数惩罚，鼓励寻找最短路径
4. **v4 - 综合版本**：结合距离奖励、步数惩罚和安全奖励
5. **v5 - 时间敏感版本**：随时间递增的步数惩罚，鼓励快速完成任务

## 使用方法

### 图形界面使用
```bash
python grid_gui.py
```

通过图形界面可以：
- 设置起点、终点和障碍物
- 配置动态障碍物轨迹
- 选择奖励函数版本
- 运行强化学习算法
- 可视化环境和训练结果

### 命令行使用
```bash
python main.py
```

运行所有算法进行训练，并显示结果对比。

### 奖励函数对比
```bash
python reward_comparison.py
```

进行奖励函数性能对比实验。

## 可视化功能

- 实时显示训练过程中的路径规划结果
- 绘制算法奖励曲线
- 对比不同算法的路径规划效果
- 显示动态障碍物轨迹和当前位置

## 注意事项

1. 项目中的动态障碍物轨迹需要预先设定
2. 训练时间较长，特别是DQN算法
3. 路径规划结果受算法和奖励函数选择影响较大
4. 可通过修改算法参数优化性能

## 项目扩展

本项目可以进一步扩展：
- 实现更多强化学习算法
- 增加更复杂的动态障碍物行为模式
- 支持三维环境路径规划
- 添加更多奖励函数设计
- 实现算法超参数自动调优